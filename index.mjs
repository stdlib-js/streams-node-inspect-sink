// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-copy@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-inherit@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-property@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-next-tick@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-number@esm/index.mjs";function m(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}var p="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function f(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}var g=f,b=h;function j(e){if(g===setTimeout)return setTimeout(e,0);if((g===f||!g)&&setTimeout)return g=setTimeout,setTimeout(e,0);try{return g(e,0)}catch(t){try{return g.call(null,e,0)}catch(t){return g.call(this,e,0)}}}"function"==typeof p.setTimeout&&(g=setTimeout),"function"==typeof p.clearTimeout&&(b=clearTimeout);var v,w=[],y=!1,x=-1;function _(){y&&v&&(y=!1,v.length?w=v.concat(w):x=-1,w.length&&T())}function T(){if(!y){var e=j(_);y=!0;for(var t=w.length;t;){for(v=w,w=[];++x<t;)v&&v[x].run();x=-1,t=w.length}v=null,y=!1,function(e){if(b===clearTimeout)return clearTimeout(e);if((b===h||!b)&&clearTimeout)return b=clearTimeout,clearTimeout(e);try{b(e)}catch(t){try{return b.call(null,e)}catch(t){return b.call(this,e)}}}(e)}}function E(e,t){this.fun=e,this.array=t}E.prototype.run=function(){this.fun.apply(null,this.array)};function M(){}var O=M,k=M,S=M,W=M,P=M,q=M,D=M;var R=p.performance||{},A=R.now||R.mozNow||R.msNow||R.oNow||R.webkitNow||function(){return(new Date).getTime()};var N=new Date;var C={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];w.push(new E(e,t)),1!==w.length||y||j(T)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:O,addListener:k,once:S,off:W,removeListener:P,removeAllListeners:q,emit:D,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*A.call(R),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-N)/1e3}},L=require("stream");"disable"===C.env.READABLE_STREAM&&L?(module.exports=L,exports=module.exports=L.Readable,exports.Readable=L.Readable,exports.Writable=L.Writable,exports.Duplex=L.Duplex,exports.Transform=L.Transform,exports.PassThrough=L.PassThrough,exports.Stream=L):(exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=L||exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js"));var V=m(Object.freeze({__proto__:null})),z={objectMode:!1,decodeStrings:!0,defaultEncoding:"utf8"},J=a,B=d,I=l.isPrimitive,F=u.isPrimitive,G=c.isPrimitive,H=s;var K=function(e,t){return J(t)?B(t,"objectMode")&&(e.objectMode=t.objectMode,!I(e.objectMode))?new TypeError(H("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):B(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!G(e.highWaterMark))?new TypeError(H("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):B(t,"decodeStrings")&&(e.decodeStrings=t.decodeStrings,!I(e.decodeStrings))?new TypeError(H("invalid option. `%s` option must be a boolean. Option: `%s`.","decodeStrings",e.decodeStrings)):B(t,"defaultEncoding")&&(e.defaultEncoding=t.defaultEncoding,!F(e.defaultEncoding))?new TypeError(H("invalid option. `%s` option must be a string. Option: `%s`.","defaultEncoding",e.defaultEncoding)):null:new TypeError(H("invalid argument. Options argument must be an object. Value: `%s`.",t))};module.exports=void 0!==C&&"renderer"===C.type?require("./browser.js"):require("./node.js");var Q=m(Object.freeze({__proto__:null}))("inspect-stream-sink"),U=V.Writable,X=t,Y=r,Z=i,$=e,ee=o,te=s,re=z,ne=K,ie=Q;function oe(e,t){var r,n,i;if(!(this instanceof oe))return arguments.length>1?new oe(e,t):new oe(e);if(n=Y(re),arguments.length>1){if(r=t,i=ne(n,e))throw i}else r=e;if(!X(r))throw new TypeError(te("invalid argument. Callback argument must be a function. Value: `%s`.",r));return ie("Creating a writable stream configured with the following options: %s.",JSON.stringify(n)),U.call(this,n),Z(this,"_destroyed",!1),Z(this,"_idx",-1),$(this,"_inspect",r),this}n(oe,U),$(oe.prototype,"_write",(function(e,t,r){if(this._idx+=1,ie("Received a new chunk. Chunk: %s. Encoding: %s. Index: %d.",e.toString(),t,this._idx),this._inspect.call(null,e,this._idx),this._destroyed)return ee(r);r()})),$(oe.prototype,"destroy",(function(e){var t;return this._destroyed?(ie("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,ee((function(){e&&(ie("Stream was destroyed due to an error. Error: %s.",JSON.stringify(e)),t.emit("error",e));ie("Closing the stream..."),t.emit("close")})),this)}));var se=a,ae=s,de=r,le=oe;var ue=a,ce=s,me=r,pe=oe;var fe=e,he=oe,ge=function(e,t){var r,n;if(arguments.length>1){if(!se(e))throw new TypeError(ae("invalid argument. Options argument must be an object. Value: `%s`.",e));r=de(e),n=t}else r={},n=e;return r.objectMode=!0,new le(r,n)},be=function(e){var t;if(arguments.length){if(!ue(e))throw new TypeError(ce("invalid argument. Options argument must be an object. Value: `%s`.",e));t=me(e)}else t={};return r;function r(e){return new pe(t,e)}};fe(he,"objectMode",ge),fe(he,"factory",be);var je=he;export{je as default,be as factory,ge as objectMode};
//# sourceMappingURL=index.mjs.map
